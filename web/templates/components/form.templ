package components

templ ChatForm(sessionID string) {
	// Give the form an ID so we can attach event listeners
	<form
		id="chat-form"
		hx-post="/chat"
		hx-target="#messages"
		hx-swap="beforeend"
		hx-on::after-request="this.reset()"
		class="flex items-end space-x-4"
	>
		<input type="hidden" name="session_id" value={ sessionID }/>
		<div class="flex-1">
			<textarea
				id="message-input"
				name="message"
				placeholder="Ask a question about your data..."
				class="w-full p-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none shadow-sm hover:shadow-md transition-shadow duration-200 bg-white/90 backdrop-blur-sm"
				rows="1"
				autofocus
				required
				onkeydown="submitOnEnter(event)"
				oninput="autoExpand(this)"
			></textarea>
		</div>
		// Give the button an ID for JS to control it
		<button id="submit-button" type="submit" class="p-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 relative flex items-center justify-center">
			// The Send icon (▶) with an ID
			<span id="send-icon" class="text-xl">▶</span>
			// The Stop icon (■) with an ID, initially hidden
			<span id="stop-icon" class="text-xl hidden">■</span>
		</button>
	</form>
}