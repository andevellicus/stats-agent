package components

templ ChatForm(sessionID string) {
	<form
		id="chat-form"
		hx-post="/chat"
		hx-target="#messages"
		hx-swap="beforeend"
		hx-on::after-request="resetChatForm(this)"
		class="flex flex-col"
	>
		<input type="hidden" name="session_id" value={ sessionID }/>
		
		<div id="file-upload-badge-container"></div>

		<div class="flex items-start space-x-3">
			<div class="flex-shrink-0">
				<input type="file" id="file-input" name="file" class="hidden" accept=".csv,.xlsx,.xls"/>
				<button id="upload-button" type="button" class="p-2.5 bg-gray-200 text-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105 relative flex items-center justify-center w-11 h-11">
					<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path>
					</svg>
				</button>
			</div>
			<div class="flex-1">
				<textarea
					id="message-input"
					name="message"
					placeholder="Ask a question about your data..."
					class="w-full pt-[10px] pb-[10px] px-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent resize-none shadow-sm hover:shadow-md transition-shadow duration-200 bg-white/90 backdrop-blur-sm"
					rows="1"
					autofocus
					required
					onkeydown="submitOnEnter(event)"
					oninput="autoExpand(this)"
				></textarea>
			</div>
			<div class="flex-shrink-0">
				<button id="submit-button" type="submit" class="p-2.5 bg-sky-800 text-white rounded-xl hover:bg-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 relative flex items-center justify-center w-11 h-11">
					<span id="send-icon" class="flex items-center justify-center">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
						</svg>
					</span>
					<span id="stop-icon" class="hidden flex items-center justify-center">
						<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
							<path d="M6 6h12v12H6z"></path>
						</svg>
					</span>
				</button>
			</div>
		</div>
	</form>
}